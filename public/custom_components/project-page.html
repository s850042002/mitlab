<link rel="import" href="../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../bower_components/core-animated-pages/core-animated-pages.html">

<polymer-element name="project-page">
	<template>
		<style>
		:host {
			display: block;
			position: relative;
			background-color: white;
		}
		h2{
			font-size: 1.2rem;
			font-weight: 700;
		}
		.project-card-small{
			display: inline-block;
			margin: 10px;
			margin-bottom: 10px;
			width: 300px;
			box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.16);
		}
		.project-card-big{
			width: 100%;
			border-radius: 3px;
			box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.16);
		}
		img.card-top {
			width: 100%;
			max-height: 150px;
		}
		img.card-center {
			width: 400px;
			height: 180px;
		}
		img[src="images/background.jpg"] {
			width: 100%;
		}
		@media (max-width: 450px){
			img.card-center {width: 100%;}
		}
		section{
			text-align: center;
		}
		</style>

        <core-ajax id="ajax" auto url="projects.json" on-core-response="{{responseHandler}}" handleAs="json"></core-ajax>
        <core-animated-pages selected="{{page}}" transitions="hero-transition">
            <section>
                <template repeat="{{projects as project}}">
                    <div class="project-card-small" hero-id="{{project.title}}" hero on-tap="{{transition}}">
                        <img src="{{project.img}}" class="card-top" hero-id="{{project.title}}-img" hero>
                        <h2 class="card-title">{{project.title}}</h2>
                    </div>
                </template>
            </section>
            <section id="details">
                <div class="project-card-big" layout vertical center hero-id="{{selectProject.title}}" hero on-tap="{{transition}}">
                    <img src="{{selectProject.img}}" class="card-center" hero-id="{{selectProject.title}}-img" hero>
                    <h2 class="card-title">{{selectProject.title}}</h2>
                    <p class="card-detail">{{selectProject.detail}}</p>
                </div>
            </section>
        </core-animated-pages>
	</template>
	<script>
    Polymer('project-page', {
        page: 0,
  		selectProject: null,
  		transition: function(e) {
  			if (this.page === 0 && e.target.templateInstance.model.project) {
  				this.selectProject = e.target.templateInstance.model.project;
  				this.page = 1;
  			} else {
  				this.page = 0;
  			}
  		},
        responseHandler: function(e){
            this.projects = e.detail.response;
        }
    });
	</script>
</polymer-element>