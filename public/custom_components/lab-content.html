<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="about-page.html">
<link rel="import" href="news-list.html">
<link rel="import" href="professor-page.html">
<link rel="import" href="member-page.html">
<link rel="import" href="paper-page.html">
<link rel="import" href="project-page.html">
<link rel="import" href="contact-page.html">

<dom-module id="lab-content">
	<template>
		<style>
			:host {
				display: block;
				font-family: 'Noto Sans', sans-serif;
			}
		</style>

		<div id="about" class="page">
			<about-page content="{{content.about}}"></about-page>
        </div>
		<div id="news" class="page">
			<news-list languages="{{language}}"></news-list>
		</div>
		<div id="professor" class="page">
			<professor-page languages="{{language}}"></professor-page>
    	</div>
		<div id="members" class="page">
			<member-page content="{{content.members}}"></member-page>
		</div>
		<div id="publications" class="page" >
			<paper-page></paper-page>
		</div>
		<div id="projects" class="page">
			<project-page></project-page>
		</div>
		<div id="contact" class="page">
			<contact-page languages="{{language}}"></contact-page>
		</div>
	</template>

    <script>
        Polymer({
            // ELEMENT
            is: 'lab-content',
            properties:{
                page:{
                    type: String,
					value: "about",
					observer: '_pageChanged'
                },
                content:{
                    type: Object,
					observer: '_contentChanged'
                },
                language:{
                    type: String
                }
            },
			_contentChanged: function(newValue, oldValue) {
				var currentLanguage = newValue["language"];
				this.language = currentLanguage;
				this.fire("pageChanged", {page: this.page});
			},
			_pageChanged: function(newValue, oldValue){
				this.fire("pageChanged", {page: newValue});
				var pages = Polymer.dom(this.root).querySelectorAll(".page");
				pages.forEach(function(element){
					if(element.id == newValue){
						element.style.display = '';

						// 解決一開始 news 隱藏時無法顯示 list 的情況
						//
						if(newValue == "news"){
							this.$$("news-list").setAttribute("focus", true);
						}
					}else{
						element.style.display = 'none';
					}
				}.bind(this));
			}
        });
    </script>
</dom-module>