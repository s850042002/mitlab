<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/iron-list/iron-list.html">

<dom-module id="news-list">
	<template>
		<style>
        iron-list {
            height: 100%;
            overflow: auto;
        }
		.item {
			overflow: hidden;
			padding: 20px;
			display: block;
			background-color: white;
			border-bottom: 1px #cccccc solid;
		}
		.time{
			display: block;
			margin-top: 18px;
			font-size: 0.7rem;
			font-weight: 300;
            text-align: right;
		}
		.subject{
			font-weight: 600;
		}
		.item:hover{
			background: #e0e0e0;
		}
		</style>

        <iron-ajax id="ajax" url="/content/news.json" auto on-response="_responseHandler" handleAs="json"></iron-ajax>
        <iron-list id="news-list" as="news">
            <template>
                <div>
                    <div class="item">
                        <div id="tw-content" class="subject">[[news.tw]]</div>
                        <div id="en-content" class="subject">[[news.en]]</div>
                        <div class="time">[[news.time]]</div>
                    </div>
                </div>
            </template>
        </iron-list>
	</template>

    <script>
        Polymer({
            is: 'news-list',
            properties: {
                languages: {
                    type: String,
                    observer: '_languageChanged'
                },
                focus:{
                    type: Boolean,
                    observer: '_focusChanged'
                }
            },
            _responseHandler: function(e){
                var data = e.detail.response;
                this.$$("#news-list").items = data;
            },
            _focusChanged: function(newValue, oldValue){
                if(newValue){
                    this.$$("#news-list").fire('resize');
                }
            },
            _languageChanged: function(newValue, oldValue){

            }
        });
    </script>
</dom-module>