<link rel="import" href="../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../bower_components/core-scroll-threshold/core-scroll-threshold.html">

<polymer-element name="news-list" attributes="languages">
	<template>
		<style>
        #scroller {
            height: 100%;
            overflow: auto;
        }
		.item {
			overflow: hidden;
			padding: 20px;
			display: block;
			background-color: white;
			border-bottom: 1px #cccccc solid;
		}
		.time{
			display: block;
			margin-top: 18px;
			font-size: 0.7rem;
			font-weight: 300;
		}
		.subject{
			font-weight: 600;
		}
		.item:hover{
			background: #e0e0e0;
		}
		</style>

        <core-ajax id="ajax" url="news.json" on-core-response="{{responseHandler}}" handleAs="json"></core-ajax>
        <core-scroll-threshold id="threshold" scrollTarget="{{$.scroller}}" lowerThreshold="100" on-lower-trigger="{{loadMore}}" fit></core-scroll-threshold>
        <div id="scroller" fit>
            <template repeat="{{d in data}}">
                <div class="item" layout horizontal center>
                    <div layout vertical flex>
                        <div class="subject" hidden?="{{languages != 'tw'}}">{{d.tw}}</div>
                        <div class="subject" hidden?="{{languages != 'en'}}">{{d.en}}</div>
                        <div self-end class="time">{{d.time}}</div>
                    </div>
                </div>
            </template>
            <!--div hidden?="{{!$.threshold.lowerTriggered}}">Please wait...</div-->
        </div>
	</template>
    <script>
        Polymer('news-list', {
            ready: function(){
                this.ajax = this.$.ajax;
                this.ajax.go();
            },
            responseHandler:function(e){
                this.data = e.detail.response;
            },
            loadMore: function() {
                console.log('load more');
                setTimeout(function() {

                }, 500);
            }
        });
    </script>
</polymer-element>