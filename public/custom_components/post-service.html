<!--
  `<post-service>` provides an API for a fake service --
  _unquote_, the read-only social networking service!

  Provides a very simple API: `posts` returns the list of posts.
  `setFavorite` pretends to persist a user's favorite choice.

  @element post-service
  @demo
  @homepage http://www.polymer-project.org/docs/start/tutorial.html
-->
<polymer-element name="post-service" attributes="posts url count">
	<template>
		<style>
		:host {
		display: none;
		}
		</style>
		<core-ajax id="ajax" auto url="{{url}}"	on-core-response="{{postsLoaded}}" handleAs="json"></core-ajax>
	</template>
  <script>
  Polymer('post-service', {
    created: function() {
      this.posts = [];
    },
    postsLoaded: function() {
      // Make a copy of the loaded data
      this.posts = this.$.ajax.response.slice(0);
      console.log(this.url);

      if(this.url==="custom_components/journal_papers.json" || this.url==="custom_components/conference_papers.json"){
          this.count = this.posts.length;
        console.log(this.posts.length);
      }
    }
    /**
     * Update the service with the current favorite value.
     * (Two-way data binding updates the favorite value
     * stored locally.) If this was a real service, this
     * method would do something useful.
     *
     * @method setFavorite
     * @param uid {Number} Unique ID for post.
     * @param isFavorite {Boolean} True if the user marked this post as a favorite.
     */
  });
  </script>
</polymer-element>
